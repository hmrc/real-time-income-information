# Copyright 2022 HM Revenue & Customs
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

include "backend.conf"

# This is the main configuration file for the application.
# ~~~~~

appName = real-time-income-information
appUrl = "https://"${appName}".protected.mdtp"
schemaResourcePath = "/schemas/real-time-income-information-post-schema.json"

# An ApplicationLoader that uses Guice to bootstrap the application.
play.application.loader = "uk.gov.hmrc.play.bootstrap.ApplicationLoader"

# Primary entry point for all HTTP requests on Play applications
play.http.requestHandler = "uk.gov.hmrc.play.bootstrap.http.RequestHandler"

# Provides an implementation of AuditConnector. Use `uk.gov.hmrc.play.bootstrap.AuditModule` or create your own.
# An audit connector must be provided.
play.modules.enabled += "uk.gov.hmrc.play.audit.AuditModule"

# Provides an implementation of MetricsFilter. Use `uk.gov.hmrc.play.graphite.GraphiteMetricsModule` or create your own.
# A metric filter must be provided
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.graphite.GraphiteMetricsModule"

# Provides an implementation and configures all filters required by a Platform frontend microservice.
play.modules.enabled += "uk.gov.hmrc.play.bootstrap.backend.BackendModule"

# Json error handler
play.http.errorHandler = "uk.gov.hmrc.play.bootstrap.backend.http.JsonErrorHandler"

# Play Modules
# ~~~~
# Additional play modules can be added here

play.modules.enabled += "uk.gov.hmrc.play.bootstrap.HttpClientModule"
play.modules.enabled += "modules.Module"

# Secret key
# ~~~~~
# The secret key is used to secure cryptographics functions.
# If you deploy your application to several instances be sure to use the same key!
play.http.secret.key = "91z1YqxLlLRrL0PK9a0fXkppQXcjg7ISzjCz0eiDwBg8LUXtTTDLpWbWJtSh9ezI"

# Session configuration
# ~~~~~
application.session.httpOnly = false
application.session.secure = false

# The application languages
# ~~~~~
play.i18n.langs = ["en"]

# Router
# ~~~~~
# Define the Router object to use for this application.
# This router will be looked up first when the application is starting up,
# so make sure this is the entry point.
# Furthermore, it's assumed your route file is named properly.
# So for an application router like `my.application.Router`,
# you may need to define a router file `conf/my.application.routes`.
# Default to Routes in the root package (and conf/routes)
# !!!WARNING!!! DO NOT CHANGE THIS ROUTER
play.http.router = prod.Routes

# Metrics plugin settings - graphite reporting is configured on a per env basis
metrics {
  name = ${appName}
  rateUnit = SECONDS
  durationUnit = SECONDS
  showSamples = true
  jvm = true
  enabled = true
}


# Microservice specific config

auditing {
  enabled = true
  consumer {
    baseUri {
      host = localhost
      port = 8100
    }
  }
}

api {
  access {
    type = PUBLIC
  }
  context = "real-time-income-information"
  endpointsEnabled = true
  status = BETA

  scopes {
      "filter:real-time-income-information-full" {
          fields = [
              1,2,3,4,5,6,7,8,9,10,
              11,12,13,14,15,16,17,18,19,20,
              21,22,23,24,25,26,27,28,29,30,
              31,32,33,34,35,36,37,38,39,40,
              41,42,43,44,45,46,47,48,49,50,
              51,52,53,54,55,56,57,58,59,60,
              61,62,63,64,65,66,67,68,69,70,
              71,72,73,74,75,76,77,78,79,80,
              81,82
          ]
      }
      "filter:real-time-income-information-sg" {
          fields = [
          18, 45, 48, 70
          ]
      }
  }

  fields {
      1 = "annualAmountOfOccupationalPension",
      2 = "apiAvailableTimestamp",
      3 = "bacsPaymentAmount",
      4 = "benefitsTaxedViaPayroll",
      5 = "benefitsTaxedYeartoDate",
      6 = "dateOfBirth",
      7 = "directorsNIC",
      8 = "earningsPeriodsCovered",
      9 = "employeePensionContributions",
      10 = "employeePensionContributionsNotPaid",
      11 = "employeesContributionsInPeriod",
      12 = "employeesContributionsYearToDate",
      13 = "employerName1",
      14 = "employerName2",
      15 = "employerPayeRef",
      16 = "employerTradeName1",
      17 = "employerTradeName2",
      18 = "employmentEndDate",
      19 = "employmentStartDate",
      20 = "flexibleDrawdownNonTaxablePayment",
      21 = "flexibleDrawdownTaxablePayment",
      22 = "flexiblyAccessingPensionRights",
      22 = "forename",
      23 = "gender",
      24 = "grossEarningsForNICs",
      25 = "grossEarningsForNICsYearToDate",
      26 = "hmrcOfficeNumber",
      27 = "hmrcReceiptTimestamp",
      28 = "initials",
      29 = "irregularPayment",
      30 = "itemsSubjectToClass1NIC",
      31 = "latePayeReportingReason",
      32 = "monthlyPeriodNumber",
      33 = "multipleIPSIndicator",
      34 = "nationalInsuranceNumber",
      35 = "niLetter",
      36 = "numberOfNormalHoursWorked",
      37 = "occPenIndicator",
      38 = "onStrikeWithinPayPeriod",
      39 = "partnerForenameOrGivenName",
      40 = "partnerInitials",
      41 = "partnerNINO",
      42 = "partnerSecondForename",
      43 = "partnerSurnameOrFamilyName",
      44 = "payAfterStatutoryDeductions",
      45 = "payFrequency",
      46 = "paymentAfterLeaving",
      47 = "paymentConfidenceStatus",
      48 = "paymentDate",
      49 = "paymentNoLongerValid",
      50 = "paymentsNotSubjectToTaxOrNICS",
      51 = "payrollId",
      52 = "pensionContributionsNotPaidYeartoDate",
      53 = "pensionContributionsYearToDate",
      54 = "pensionsDeathBenefit",
      55 = "rtiReceivedDate",
      56 = "schemeExemptFromElectronicFiling",
      57 = "secondForename",
      58 = "seriousillHealthLumpSum",
      59 = "sharedParentalPayYearToDate",
      60 = "statutoryMaternityPayYeartoDate",
      61 = "statutoryPaternityPayYearToDate",
      62 = "surname",
      63 = "taxCode",
      64 = "taxCodeBasisisNonCumulative",
      65 = "taxDeductedOrRefunded",
      66 = "taxRegime",
      67 = "taxWeekNumberOfAppointmentOfDirector",
      68 = "taxYear",
      69 = "taxYearIndicator",
      70 = "taxablePayInPeriod",
      71 = "taxablePayToDate",
      72 = "totalEmployerNIContributionsInPeriod",
      73 = "totalTaxToDate",
      74 = "trivialCommutationPaymentTypeA",
      75 = "trivialCommutationPaymentTypeB",
      76 = "trivialCommutationPaymentTypeC",
      77 = "uniqueEmploymentSequenceNumber",
      78 = "uniquePaymentId",
      79 = "unpaidAbsencePayPeriod",
      80 = "valueOfDeductions",
      81 = "valueofStatutoryAdoptionPayYearToDate",
      82 = "weeklyPeriodNumber"
  }
}

microservice {
  metrics {
    graphite {
      host = graphite
      port = 2003
      prefix = play.${appName}.
      enabled = false
    }
  }

  services {
    auth {
      host = localhost
      port = 8500
    }

    des-hod {
      host = localhost
      port = 9359
      authorizationToken = "Local"
      env = "local"
    }
  }
}
